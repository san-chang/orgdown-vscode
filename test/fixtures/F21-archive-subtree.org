#+TITLE: Test Suite for Archived Headlines

* Show Case

#+NAME: Headline with ARCHIVE tag
#+BEGIN_FIXTURE
,* DONE A completed and archived task :work:project:ARCHIVE:
#+END_FIXTURE
#+EXPECTED: :type scope
# The entire line should be an inactive node.
"* DONE A completed and archived task :work:project:ARCHIVE:" => {{scopes.META_OUTLINE_INACTIVE}}, {{scopes.HEADING_BLOCK}}
# Now check token-level scopes.
"*" => {{scopes.HEADING_LEVEL_1}}, {{scopes.HEADING_PUNCTUATION}}
"DONE" => {{scopes.HEADING_LEVEL_1}}, {{scopes.TODO_KEYWORD}}
"A completed and archived task" => {{scopes.HEADING_LEVEL_1}}, {{scopes.HEADING_TITLE}}
":work:project:ARCHIVE:" => {{scopes.HEADING_LEVEL_1}}, {{scopes.TAG}}

* Edge Cases

#+NAME: COMMENT headline with ARCHIVE tag
#+BEGIN_FIXTURE
,** COMMENT An archived comment :ARCHIVE:
#+END_FIXTURE
#+EXPECTED: :type scope
"** COMMENT An archived comment :ARCHIVE:" => {{scopes.META_OUTLINE_INACTIVE}}, {{scopes.HEADING_BLOCK}}
"**" =>  {{scopes.HEADING_LEVEL_2}}, {{scopes.HEADING_PUNCTUATION}}
"COMMENT" => {{scopes.HEADING_LEVEL_2}}, {{scopes.TODO_KEYWORD}}
"An archived comment" => {{scopes.HEADING_LEVEL_2}}, {{scopes.HEADING_TITLE}}
":ARCHIVE:" => {{scopes.HEADING_LEVEL_2}}, {{scopes.TAG}}

#+NAME: ARCHIVE tag is not the last tag
#+BEGIN_FIXTURE
,*** NEXT An archived task that is not last :ARCHIVE:work:
#+END_FIXTURE
#+EXPECTED: :type scope
"*** NEXT An archived task that is not last :ARCHIVE:work:" => {{scopes.META_OUTLINE_INACTIVE}}, {{scopes.HEADING_BLOCK}}
"***" => {{scopes.HEADING_LEVEL_3}}, {{scopes.HEADING_PUNCTUATION}}
"NEXT" => {{scopes.HEADING_LEVEL_3}}, {{scopes.TODO_KEYWORD}}
"An archived task that is not last" => {{scopes.HEADING_LEVEL_3}}, {{scopes.HEADING_TITLE}}
":ARCHIVE:work:" => {{scopes.HEADING_LEVEL_3}}, {{scopes.TAG}}


#+NAME: Case-insensitivity of ARCHIVE tag
#+BEGIN_FIXTURE
,* A task with lowercase archive tag :archive:
#+END_FIXTURE
#+EXPECTED: :type scope
"* A task with lowercase archive tag :archive:" => {{scopes.META_OUTLINE_INACTIVE}}
":archive:" => {{scopes.TAG}}

#+NAME: Archived headline with priority
#+BEGIN_FIXTURE
,* DONE [#C] An archived task with priority :ARCHIVE:
#+END_FIXTURE
#+EXPECTED: :type scope
"* DONE [#C] An archived task with priority :ARCHIVE:" => {{scopes.META_OUTLINE_INACTIVE}}
"[#C]" => {{scopes.PRIORITY_COOKIE}}
":ARCHIVE:" => {{scopes.TAG}}

#+NAME: Non-archived headline with "archive" in title
#+BEGIN_FIXTURE
,* TODO An item to archive
#+END_FIXTURE
#+EXPECTED: :type scope
"* TODO An item to archive" => {{scopes.META_OUTLINE_1}}
"* TODO An item to archive" => !{{scopes.META_OUTLINE_INACTIVE}}
